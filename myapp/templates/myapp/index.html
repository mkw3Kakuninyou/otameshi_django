{% extends 'myapp/base.html' %}

{% block content %}
<!-- Start your project here-->
<div class="jumbotron jumbotron-fluid">
    <div class="container">
        {% if request.user.is_authenticated %}
            <p>{{ request.user }}ã•ã‚“ï¼ã“ã«ã‚ƒã«ã‚ƒã¡ã‚ã‚“ã“ãã°ğŸ¾</p>
        {% else %}
            <p>ãŠå®¢ã•ã‚“ï¼ã“ã«ã‚ƒã«ã‚ƒã¡ã‚ã‚“ã“ãã°ğŸ¾</p>
        {% endif %}
        <br>
        {% comment %} ã€Œlayoutã€ã¯context_processors.pyã®LayoutListé–¢æ•°ã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ¼ã§ã‚ã‚‹ï¼ {% endcomment %}
        <h1 class="display-4">{{ layout.home_top_title }}</h1>
        <h2 class="display-8">{{ layout.home_sub_title }}</2>
    </div>
    <div class="container">
        <br>
        <p>æœ¬æ—¥ã¯{{ today }}ã§ã™ï¼</p>
        {% comment %} ã€Œregistered_usersã€ã¯context_processors.pyã®Indexé–¢æ•°ã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ¼ã§ã‚ã‚‹ï¼ {% endcomment %}
        <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²è€…æ•°ã¯{{ registered_users }}äººã§ã™ï¼</p>
        {% comment %} ã€Œbbsã€ã¯context_processors.pyã®Indexé–¢æ•°ã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ¼ã§ã‚ã‚‹ï¼ {% endcomment %}
        {% for item in bbs %}
            <p>ğŸ’©{{ item.bbscontent }}</P>
        {% endfor %}
    </div>
</div>

<div class="container">
    <div class='row'>
        <div class='col-md-9'>
            {% comment %} å‚è€ƒ)https://teratail.com/questions/339728 {% endcomment %}
            <a class="btn btn-outline-dark dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">ä¸¦æ›¿</a>
            <div class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink">
                <form action='' method='POST'>
                {% csrf_token %}
                    <input type='submit' name='order' value='æŠ•ç¨¿æ—¥-æ–°ã—ã„é †'>
                    <input type='submit' name='order' value='æŠ•ç¨¿æ—¥-å¤ã„é †'>
                    <input type='submit' name='order' value='æ›´æ–°æ—¥-æ–°ã—ã„é †'>
                    <input type='submit' name='order' value='æ›´æ–°æ—¥-å¤ã„é †'>
                    <input type='submit' name='order' value='ã‚«ãƒ†ã‚´ãƒªã”ã¨'>
                    <input type='submit' name='order' value='æŠ•ç¨¿è€…ã”ã¨'>
                </form>
            </div>
        </div>
    </div>
</div>
<br>


<div class="row">
    <div class="col-md-9">
        <!-- Card deck -->
        <div class="card-deck">
            {% for item in post_list %}
            <div class="col-md-4">
                <!-- Card -->
                <div class="card mb-4">

                    <!--Card image-->
                    <div class="view overlay">
                        {% if item.thumbnail %}
                        <img class="card-img-top" src="{{ item.thumbnail.url }}"
                        alt="{{item.title}}">
                        {% else %}
                        <img class="card-img-top" src="https://mdbootstrap.com/img/Photos/Others/images/16.jpg"
                            alt="{{item.title}}">
                        {% endif %}
                        <a href="{% url 'myapp:post_detail' item.id %}">
                            <div class="mask rgba-white-slight"></div>
                        </a>
                    </div>

                    <!--Card content-->
                    <div class="card-body">

                        <!--Title-->
                        <h4 class="card-title">ã€{{ item.title }}ã€‘</h4>
                        <p>(æŠ•ç¨¿è€…ï¼š{{ item.author }})</p>
                        <p>(é–²è¦§æ•°ï¼š{{ item.views }})</p>
                        <p>(ã‚«ãƒ†ã‚´ãƒªï¼š{{ item.category }})</p>
                        <!--Text-->
                        <p class="card-text">{{item.description|safe|linebreaks|truncatechars_html:30}}</p>
                        <!-- Provides extra visual weight and identifies the primary action in a set of buttons -->
                        <a href="{% url 'myapp:post_detail' item.id %}" type="button" class="btn btn-light-blue btn-md">è©³ç´°ã¸</a>
                        <div class="card-footer text-muted text-center mt-4">
                            <small>by&nbsp;{{ item.author }}<br>ğŸ’©æŠ•ç¨¿æ—¥{{ item.created_at.date }}<br>ğŸ’©æ›´æ–°æ—¥{{ item.updated_at.date }}
                            <br>ğŸ’©ãŠæ°—ã«å…¥ã‚Šã¸ç™»éŒ²ã—ãŸ<br>ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</small>
                            <br>
                            {% comment %} ã€Œlike_countã€ã¯models.pyã®Postã‚¯ãƒ©ã‚¹ã®like_countãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹ï¼ {% endcomment %}
                            <i class="fas fa-heart" style='color:pink;'></i>&nbsp;{{ item.like_count }}
                        </div>
                    </div>
                </div>
                <!-- Card -->
            </div>
            {% endfor %}
        </div>
        <!-- Card deck -->
    </div>
</div>
<br>
{% include 'myapp/pagination.html' %}
<br>
{% endblock %}